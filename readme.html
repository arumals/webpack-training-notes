<!DOCTYPE html><html><head><meta charset="utf-8"><style>body {
  width: 45em;
  border: 1px solid #ddd;
  outline: 1300px solid #fff;
  margin: 16px auto;
}

body .markdown-body
{
  padding: 30px;
}

@font-face {
  font-family: fontawesome-mini;
  src: url(data:font/woff;charset=utf-8;base64,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) format('woff');
}

@font-face {
  font-family: octicons-anchor;
  src: url(data:font/woff;charset=utf-8;base64,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) format('woff');
}

.markdown-body {
  font-family: sans-serif;
  -ms-text-size-adjust: 100%;
  -webkit-text-size-adjust: 100%;
  color: #333333;
  overflow: hidden;
  font-family: "Helvetica Neue", Helvetica, "Segoe UI", Arial, freesans, sans-serif;
  font-size: 16px;
  line-height: 1.6;
  word-wrap: break-word;
}

.markdown-body a {
  background: transparent;
}

.markdown-body a:active,
.markdown-body a:hover {
  outline: 0;
}

.markdown-body b,
.markdown-body strong {
  font-weight: bold;
}

.markdown-body mark {
  background: #ff0;
  color: #000;
  font-style: italic;
  font-weight: bold;
}

.markdown-body sub,
.markdown-body sup {
  font-size: 75%;
  line-height: 0;
  position: relative;
  vertical-align: baseline;
}
.markdown-body sup {
  top: -0.5em;
}
.markdown-body sub {
  bottom: -0.25em;
}

.markdown-body h1 {
  font-size: 2em;
  margin: 0.67em 0;
}

.markdown-body img {
  border: 0;
}

.markdown-body hr {
  -moz-box-sizing: content-box;
  box-sizing: content-box;
  height: 0;
}

.markdown-body pre {
  overflow: auto;
}

.markdown-body code,
.markdown-body kbd,
.markdown-body pre,
.markdown-body samp {
  font-family: monospace, monospace;
  font-size: 1em;
}

.markdown-body input {
  color: inherit;
  font: inherit;
  margin: 0;
}

.markdown-body html input[disabled] {
  cursor: default;
}

.markdown-body input {
  line-height: normal;
}

.markdown-body input[type="checkbox"] {
  box-sizing: border-box;
  padding: 0;
}

.markdown-body table {
  border-collapse: collapse;
  border-spacing: 0;
}

.markdown-body td,
.markdown-body th {
  padding: 0;
}

.markdown-body .codehilitetable {
  border: 0;
  border-spacing: 0;
}

.markdown-body .codehilitetable tr {
  border: 0;
}

.markdown-body .codehilitetable pre,
.markdown-body .codehilitetable div.codehilite {
  margin: 0;
}

.markdown-body .linenos,
.markdown-body .code,
.markdown-body .codehilitetable td {
  border: 0;
  padding: 0;
}

.markdown-body td:not(.linenos) .linenodiv {
  padding: 0 !important;
}

.markdown-body .code {
  width: 100%;
}

.markdown-body .linenos div pre,
.markdown-body .linenodiv pre,
.markdown-body .linenodiv {
  border: 0;
  -webkit-border-radius: 0;
  -moz-border-radius: 0;
  border-radius: 0;
  -webkit-border-top-left-radius: 3px;
  -webkit-border-bottom-left-radius: 3px;
  -moz-border-radius-topleft: 3px;
  -moz-border-radius-bottomleft: 3px;
  border-top-left-radius: 3px;
  border-bottom-left-radius: 3px;
}

.markdown-body .code div pre,
.markdown-body .code div {
  border: 0;
  -webkit-border-radius: 0;
  -moz-border-radius: 0;
  border-radius: 0;
  -webkit-border-top-right-radius: 3px;
  -webkit-border-bottom-right-radius: 3px;
  -moz-border-radius-topright: 3px;
  -moz-border-radius-bottomright: 3px;
  border-top-right-radius: 3px;
  border-bottom-right-radius: 3px;
}

.markdown-body * {
  -moz-box-sizing: border-box;
  box-sizing: border-box;
}

.markdown-body input {
  font: 13px Helvetica, arial, freesans, clean, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol";
  line-height: 1.4;
}

.markdown-body a {
  color: #4183c4;
  text-decoration: none;
}

.markdown-body a:hover,
.markdown-body a:focus,
.markdown-body a:active {
  text-decoration: underline;
}

.markdown-body hr {
  height: 0;
  margin: 15px 0;
  overflow: hidden;
  background: transparent;
  border: 0;
  border-bottom: 1px solid #ddd;
}

.markdown-body hr:before,
.markdown-body hr:after {
  display: table;
  content: " ";
}

.markdown-body hr:after {
  clear: both;
}

.markdown-body h1,
.markdown-body h2,
.markdown-body h3,
.markdown-body h4,
.markdown-body h5,
.markdown-body h6 {
  margin-top: 15px;
  margin-bottom: 15px;
  line-height: 1.1;
}

.markdown-body h1 {
  font-size: 30px;
}

.markdown-body h2 {
  font-size: 21px;
}

.markdown-body h3 {
  font-size: 16px;
}

.markdown-body h4 {
  font-size: 14px;
}

.markdown-body h5 {
  font-size: 12px;
}

.markdown-body h6 {
  font-size: 11px;
}

.markdown-body blockquote {
  margin: 0;
}

.markdown-body ul,
.markdown-body ol {
  padding: 0;
  margin-top: 0;
  margin-bottom: 0;
}

.markdown-body ol ol,
.markdown-body ul ol {
  list-style-type: lower-roman;
}

.markdown-body ul ul ol,
.markdown-body ul ol ol,
.markdown-body ol ul ol,
.markdown-body ol ol ol {
  list-style-type: lower-alpha;
}

.markdown-body dd {
  margin-left: 0;
}

.markdown-body code,
.markdown-body pre,
.markdown-body samp {
  font-family: Consolas, "Liberation Mono", Menlo, Courier, monospace;
  font-size: 12px;
}

.markdown-body pre {
  margin-top: 0;
  margin-bottom: 0;
}

.markdown-body kbd {
  background-color: #e7e7e7;
  background-image: -moz-linear-gradient(#fefefe, #e7e7e7);
  background-image: -webkit-linear-gradient(#fefefe, #e7e7e7);
  background-image: linear-gradient(#fefefe, #e7e7e7);
  background-repeat: repeat-x;
  border-radius: 2px;
  border: 1px solid #cfcfcf;
  color: #000;
  padding: 3px 5px;
  line-height: 10px;
  font: 11px Consolas, "Liberation Mono", Menlo, Courier, monospace;
  display: inline-block;
}

.markdown-body>*:first-child {
  margin-top: 0 !important;
}

.markdown-body>*:last-child {
  margin-bottom: 0 !important;
}

.markdown-body .headeranchor-link {
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  display: block;
  padding-right: 6px;
  padding-left: 30px;
  margin-left: -30px;
}

.markdown-body .headeranchor-link:focus {
  outline: none;
}

.markdown-body h1,
.markdown-body h2,
.markdown-body h3,
.markdown-body h4,
.markdown-body h5,
.markdown-body h6 {
  position: relative;
  margin-top: 1em;
  margin-bottom: 16px;
  font-weight: bold;
  line-height: 1.4;
}

.markdown-body h1 .headeranchor,
.markdown-body h2 .headeranchor,
.markdown-body h3 .headeranchor,
.markdown-body h4 .headeranchor,
.markdown-body h5 .headeranchor,
.markdown-body h6 .headeranchor {
  display: none;
  color: #000;
  vertical-align: middle;
}

.markdown-body h1:hover .headeranchor-link,
.markdown-body h2:hover .headeranchor-link,
.markdown-body h3:hover .headeranchor-link,
.markdown-body h4:hover .headeranchor-link,
.markdown-body h5:hover .headeranchor-link,
.markdown-body h6:hover .headeranchor-link {
  height: 1em;
  padding-left: 8px;
  margin-left: -30px;
  line-height: 1;
  text-decoration: none;
}

.markdown-body h1:hover .headeranchor-link .headeranchor,
.markdown-body h2:hover .headeranchor-link .headeranchor,
.markdown-body h3:hover .headeranchor-link .headeranchor,
.markdown-body h4:hover .headeranchor-link .headeranchor,
.markdown-body h5:hover .headeranchor-link .headeranchor,
.markdown-body h6:hover .headeranchor-link .headeranchor {
  display: inline-block;
}

.markdown-body h1 {
  padding-bottom: 0.3em;
  font-size: 2.25em;
  line-height: 1.2;
  border-bottom: 1px solid #eee;
}

.markdown-body h2 {
  padding-bottom: 0.3em;
  font-size: 1.75em;
  line-height: 1.225;
  border-bottom: 1px solid #eee;
}

.markdown-body h3 {
  font-size: 1.5em;
  line-height: 1.43;
}

.markdown-body h4 {
  font-size: 1.25em;
}

.markdown-body h5 {
  font-size: 1em;
}

.markdown-body h6 {
  font-size: 1em;
  color: #777;
}

.markdown-body p,
.markdown-body blockquote,
.markdown-body ul,
.markdown-body ol,
.markdown-body dl,
.markdown-body table,
.markdown-body pre,
.markdown-body .admonition {
  margin-top: 0;
  margin-bottom: 16px;
}

.markdown-body hr {
  height: 4px;
  padding: 0;
  margin: 16px 0;
  background-color: #e7e7e7;
  border: 0 none;
}

.markdown-body ul,
.markdown-body ol {
  padding-left: 2em;
}

.markdown-body ul ul,
.markdown-body ul ol,
.markdown-body ol ol,
.markdown-body ol ul {
  margin-top: 0;
  margin-bottom: 0;
}

.markdown-body li>p {
  margin-top: 16px;
}

.markdown-body dl {
  padding: 0;
}

.markdown-body dl dt {
  padding: 0;
  margin-top: 16px;
  font-size: 1em;
  font-style: italic;
  font-weight: bold;
}

.markdown-body dl dd {
  padding: 0 16px;
  margin-bottom: 16px;
}

.markdown-body blockquote {
  padding: 0 15px;
  color: #777;
  border-left: 4px solid #ddd;
}

.markdown-body blockquote>:first-child {
  margin-top: 0;
}

.markdown-body blockquote>:last-child {
  margin-bottom: 0;
}

.markdown-body table {
  display: block;
  width: 100%;
  overflow: auto;
  word-break: normal;
  word-break: keep-all;
}

.markdown-body table th {
  font-weight: bold;
}

.markdown-body table th,
.markdown-body table td {
  padding: 6px 13px;
  border: 1px solid #ddd;
}

.markdown-body table tr {
  background-color: #fff;
  border-top: 1px solid #ccc;
}

.markdown-body table tr:nth-child(2n) {
  background-color: #f8f8f8;
}

.markdown-body img {
  max-width: 100%;
  -moz-box-sizing: border-box;
  box-sizing: border-box;
}

.markdown-body code,
.markdown-body samp {
  padding: 0;
  padding-top: 0.2em;
  padding-bottom: 0.2em;
  margin: 0;
  font-size: 85%;
  background-color: rgba(0,0,0,0.04);
  border-radius: 3px;
}

.markdown-body code:before,
.markdown-body code:after {
  letter-spacing: -0.2em;
  content: "\00a0";
}

.markdown-body pre>code {
  padding: 0;
  margin: 0;
  font-size: 100%;
  word-break: normal;
  white-space: pre;
  background: transparent;
  border: 0;
}

.markdown-body .codehilite {
  margin-bottom: 16px;
}

.markdown-body .codehilite pre,
.markdown-body pre {
  padding: 16px;
  overflow: auto;
  font-size: 85%;
  line-height: 1.45;
  background-color: #f7f7f7;
  border-radius: 3px;
}

.markdown-body .codehilite pre {
  margin-bottom: 0;
  word-break: normal;
}

.markdown-body pre {
  word-wrap: normal;
}

.markdown-body pre code {
  display: inline;
  max-width: initial;
  padding: 0;
  margin: 0;
  overflow: initial;
  line-height: inherit;
  word-wrap: normal;
  background-color: transparent;
  border: 0;
}

.markdown-body pre code:before,
.markdown-body pre code:after {
  content: normal;
}

/* Admonition */
.markdown-body .admonition {
  -webkit-border-radius: 3px;
  -moz-border-radius: 3px;
  position: relative;
  border-radius: 3px;
  border: 1px solid #e0e0e0;
  border-left: 6px solid #333;
  padding: 10px 10px 10px 30px;
}

.markdown-body .admonition table {
  color: #333;
}

.markdown-body .admonition p {
  padding: 0;
}

.markdown-body .admonition-title {
  font-weight: bold;
  margin: 0;
}

.markdown-body .admonition>.admonition-title {
  color: #333;
}

.markdown-body .attention>.admonition-title {
  color: #a6d796;
}

.markdown-body .caution>.admonition-title {
  color: #d7a796;
}

.markdown-body .hint>.admonition-title {
  color: #96c6d7;
}

.markdown-body .danger>.admonition-title {
  color: #c25f77;
}

.markdown-body .question>.admonition-title {
  color: #96a6d7;
}

.markdown-body .note>.admonition-title {
  color: #d7c896;
}

.markdown-body .admonition:before,
.markdown-body .attention:before,
.markdown-body .caution:before,
.markdown-body .hint:before,
.markdown-body .danger:before,
.markdown-body .question:before,
.markdown-body .note:before {
  font: normal normal 16px fontawesome-mini;
  -moz-osx-font-smoothing: grayscale;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
  line-height: 1.5;
  color: #333;
  position: absolute;
  left: 0;
  top: 0;
  padding-top: 10px;
  padding-left: 10px;
}

.markdown-body .admonition:before {
  content: "\f056\00a0";
  color: 333;
}

.markdown-body .attention:before {
  content: "\f058\00a0";
  color: #a6d796;
}

.markdown-body .caution:before {
  content: "\f06a\00a0";
  color: #d7a796;
}

.markdown-body .hint:before {
  content: "\f05a\00a0";
  color: #96c6d7;
}

.markdown-body .danger:before {
  content: "\f057\00a0";
  color: #c25f77;
}

.markdown-body .question:before {
  content: "\f059\00a0";
  color: #96a6d7;
}

.markdown-body .note:before {
  content: "\f040\00a0";
  color: #d7c896;
}

.markdown-body .admonition::after {
  content: normal;
}

.markdown-body .attention {
  border-left: 6px solid #a6d796;
}

.markdown-body .caution {
  border-left: 6px solid #d7a796;
}

.markdown-body .hint {
  border-left: 6px solid #96c6d7;
}

.markdown-body .danger {
  border-left: 6px solid #c25f77;
}

.markdown-body .question {
  border-left: 6px solid #96a6d7;
}

.markdown-body .note {
  border-left: 6px solid #d7c896;
}

.markdown-body .admonition>*:first-child {
  margin-top: 0 !important;
}

.markdown-body .admonition>*:last-child {
  margin-bottom: 0 !important;
}

/* progress bar*/
.markdown-body .progress {
  display: block;
  width: 300px;
  margin: 10px 0;
  height: 24px;
  -webkit-border-radius: 3px;
  -moz-border-radius: 3px;
  border-radius: 3px;
  background-color: #ededed;
  position: relative;
  box-shadow: inset -1px 1px 3px rgba(0, 0, 0, .1);
}

.markdown-body .progress-label {
  position: absolute;
  text-align: center;
  font-weight: bold;
  width: 100%; margin: 0;
  line-height: 24px;
  color: #333;
  text-shadow: 1px 1px 0 #fefefe, -1px -1px 0 #fefefe, -1px 1px 0 #fefefe, 1px -1px 0 #fefefe, 0 1px 0 #fefefe, 0 -1px 0 #fefefe, 1px 0 0 #fefefe, -1px 0 0 #fefefe, 1px 1px 2px #000;
  -webkit-font-smoothing: antialiased !important;
  white-space: nowrap;
  overflow: hidden;
}

.markdown-body .progress-bar {
  height: 24px;
  float: left;
  -webkit-border-radius: 3px;
  -moz-border-radius: 3px;
  border-radius: 3px;
  background-color: #96c6d7;
  box-shadow: inset 0 1px 0 rgba(255, 255, 255, .5), inset 0 -1px 0 rgba(0, 0, 0, .1);
  background-size: 30px 30px;
  background-image: -webkit-linear-gradient(
    135deg, rgba(255, 255, 255, .4) 27%,
    transparent 27%,
    transparent 52%, rgba(255, 255, 255, .4) 52%,
    rgba(255, 255, 255, .4) 77%,
    transparent 77%, transparent
  );
  background-image: -moz-linear-gradient(
    135deg,
    rgba(255, 255, 255, .4) 27%, transparent 27%,
    transparent 52%, rgba(255, 255, 255, .4) 52%,
    rgba(255, 255, 255, .4) 77%, transparent 77%,
    transparent
  );
  background-image: -ms-linear-gradient(
    135deg,
    rgba(255, 255, 255, .4) 27%, transparent 27%,
    transparent 52%, rgba(255, 255, 255, .4) 52%,
    rgba(255, 255, 255, .4) 77%, transparent 77%,
    transparent
  );
  background-image: -o-linear-gradient(
    135deg,
    rgba(255, 255, 255, .4) 27%, transparent 27%,
    transparent 52%, rgba(255, 255, 255, .4) 52%,
    rgba(255, 255, 255, .4) 77%, transparent 77%,
    transparent
  );
  background-image: linear-gradient(
    135deg,
    rgba(255, 255, 255, .4) 27%, transparent 27%,
    transparent 52%, rgba(255, 255, 255, .4) 52%,
    rgba(255, 255, 255, .4) 77%, transparent 77%,
    transparent
  );
}

.markdown-body .progress-100plus .progress-bar {
  background-color: #a6d796;
}

.markdown-body .progress-80plus .progress-bar {
  background-color: #c6d796;
}

.markdown-body .progress-60plus .progress-bar {
  background-color: #d7c896;
}

.markdown-body .progress-40plus .progress-bar {
  background-color: #d7a796;
}

.markdown-body .progress-20plus .progress-bar {
  background-color: #d796a6;
}

.markdown-body .progress-0plus .progress-bar {
  background-color: #c25f77;
}

.markdown-body .candystripe-animate .progress-bar{
  -webkit-animation: animate-stripes 3s linear infinite;
  -moz-animation: animate-stripes 3s linear infinite;
  animation: animate-stripes 3s linear infinite;
}

@-webkit-keyframes animate-stripes {
  0% {
    background-position: 0 0;
  }

  100% {
    background-position: 60px 0;
  }
}

@-moz-keyframes animate-stripes {
  0% {
    background-position: 0 0;
  }

  100% {
    background-position: 60px 0;
  }
}

@keyframes animate-stripes {
  0% {
    background-position: 0 0;
  }

  100% {
    background-position: 60px 0;
  }
}

.markdown-body .gloss .progress-bar {
  box-shadow:
    inset 0 4px 12px rgba(255, 255, 255, .7),
    inset 0 -12px 0 rgba(0, 0, 0, .05);
}

/* Multimarkdown Critic Blocks */
.markdown-body .critic_mark {
  background: #ff0;
}

.markdown-body .critic_delete {
  color: #c82829;
  text-decoration: line-through;
}

.markdown-body .critic_insert {
  color: #718c00 ;
  text-decoration: underline;
}

.markdown-body .critic_comment {
  color: #8e908c;
  font-style: italic;
}

.markdown-body .headeranchor {
  font: normal normal 16px octicons-anchor;
  line-height: 1;
  display: inline-block;
  text-decoration: none;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

.headeranchor:before {
  content: '\f05c';
}

.markdown-body .task-list-item {
  list-style-type: none;
}

.markdown-body .task-list-item+.task-list-item {
  margin-top: 3px;
}

.markdown-body .task-list-item input {
  margin: 0 4px 0.25em -20px;
  vertical-align: middle;
}

/* Media */
@media only screen and (min-width: 480px) {
  .markdown-body {
    font-size:14px;
  }
}

@media only screen and (min-width: 768px) {
  .markdown-body {
    font-size:16px;
  }
}

@media print {
  .markdown-body * {
    background: transparent !important;
    color: black !important;
    filter:none !important;
    -ms-filter: none !important;
  }

  .markdown-body {
    font-size:12pt;
    max-width:100%;
    outline:none;
    border: 0;
  }

  .markdown-body a,
  .markdown-body a:visited {
    text-decoration: underline;
  }

  .markdown-body .headeranchor-link {
    display: none;
  }

  .markdown-body a[href]:after {
    content: " (" attr(href) ")";
  }

  .markdown-body abbr[title]:after {
    content: " (" attr(title) ")";
  }

  .markdown-body .ir a:after,
  .markdown-body a[href^="javascript:"]:after,
  .markdown-body a[href^="#"]:after {
    content: "";
  }

  .markdown-body pre {
    white-space: pre;
    white-space: pre-wrap;
    word-wrap: break-word;
  }

  .markdown-body pre,
  .markdown-body blockquote {
    border: 1px solid #999;
    padding-right: 1em;
    page-break-inside: avoid;
  }

  .markdown-body .progress,
  .markdown-body .progress-bar {
    -moz-box-shadow: none;
    -webkit-box-shadow: none;
    box-shadow: none;
  }

  .markdown-body .progress {
    border: 1px solid #ddd;
  }

  .markdown-body .progress-bar {
    height: 22px;
    border-right: 1px solid #ddd;
  }

  .markdown-body tr,
  .markdown-body img {
    page-break-inside: avoid;
  }

  .markdown-body img {
    max-width: 100% !important;
  }

  .markdown-body p,
  .markdown-body h2,
  .markdown-body h3 {
    orphans: 3;
    widows: 3;
  }

  .markdown-body h2,
  .markdown-body h3 {
    page-break-after: avoid;
  }
}
</style><title>readme</title></head><body><article class="markdown-body"><h1 id="webpack"><a name="user-content-webpack" href="#webpack" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>WebPack.</h1>
<h2 id="chapter-1-developing-with-webpack"><a name="user-content-chapter-1-developing-with-webpack" href="#chapter-1-developing-with-webpack" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Chapter 1 : Developing with Webpack.</h2>
<p>Create a minimal package.json version file.</p>
<pre><code class="sh">$ npm init -y
</code></pre>

<p>Install webpack as a dev dependency.</p>
<pre><code class="sh">$ npm i webpack@beta --save-dev
</code></pre>

<p>Now we can file webpack inside.</p>
<pre><code class="sh">$ node_modules/.bin/webpack
</code></pre>

<p>We need to create a configuration file.</p>
<pre><code class="sh">$ touch webpack.config.js
</code></pre>

<pre><code class="js">const path = require('path')
const HtmlWebpackPlugin = require('html-webpack-plugin')

const PATH = {
    app: path.join(__dirname,'app'),
    build: path.join(__dirname, 'build')
}

module.exports = {
    entry: {
        app: PATH.app
    },
    output: {
        path: PATH.build,
        filename: '[name].js'
    },
    plugins: [
        new HtmlWebpackPlugin({
            title: 'Webpack Demo'
        })
    ]
}
</code></pre>

<p>Useful path methods.</p>
<ul>
<li>path.basename(&lsquo;path&rsquo;)</li>
<li>path.delimiter =&gt; &lsquo;:&rsquo;</li>
<li>path.sep =&gt; &lsquo;/&rsquo;</li>
<li>path.dirname(&lsquo;path&rsquo;)</li>
<li>path.extname(&lsquo;path&rsquo;)</li>
<li>path.join(&lsquo;a&rsquo;,&rsquo;b&rsquo;,&rsquo;c&rsquo;)</li>
<li>path.normalize(&lsquo;/a/b/c/d/..&rsquo;) =&gt; &lsquo;/a/b/c&rsquo;</li>
<li>path.relative(&lsquo;/a/b/c/d&rsquo;,&rsquo;/a/b/f/g&rsquo;) =&gt; ../../f/g</li>
</ul>
<p>Add the webpack process to the scripts section inside webpack.config.js.</p>
<pre><code class="js"># webpack.config.js
{
    scripts: {
        ...
        &quot;build&quot; : &quot;webpack&quot;
    }
}
</code></pre>

<pre><code>This can be run in any folder inside the project, because node adds the node_modules/.bin folder to the PATH temporary.
</code></pre>
<p>Plugins.</p>
<ul>
<li>case-sensitive-paths-webpack-plugin</li>
<li>npm-install-webpack-plugin</li>
<li>system-bell-webpack-plugin</li>
<li>friendly-errors-webpack-plugin</li>
<li>nyan-progress-webpack-plugin</li>
<li>webpack-dashboard</li>
</ul>
<h2 id="spliting-the-configuration"><a name="user-content-spliting-the-configuration" href="#spliting-the-configuration" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Spliting the configuration.</h2>
<p>Possible ways to manage configuration.</p>
<ul>
<li>Maintain configuration in multiple files and ponint to each through the &ndash;config parameter.</li>
<li>Push configuration to a library which you then consume.</li>
<li>Maintain configuration with a single file and branch there by relying on the &ndash;env parameter.</li>
</ul>
<p>webpack-merge</p>
<pre><code class="sh">$ npm i webpack-merge --save-dev
</code></pre>

<p>Update the configuration to use the merge package.</p>
<pre><code class="js">const path = require('path')
const HtmlWebpackPlugin = require('html-webpack-plugin')
const merge = require('webpack-merge')

const PATHS = {
    app: path.join(__dirname, 'app'),
    build: path.join(__dirname, 'build')
}

const common = {

    entry: {
        app: PATHS.app
    },

    output: {
        path: PATHS.build,
        filename: '[name].js'
    },

    plugins: [

        // define the html title
        new HtmlWebpackPlugin({
            title: 'Webpack demo',
        })

    ]

}

module.exports = function(env) {
    return merge(common)
}
</code></pre>

<p>Now we can pass the env value inside our build task</p>
<pre><code class="js">{
    ...
    &quot;scripts&quot;: {
        ...
        &quot;build&quot;: &quot;webpack --env production&quot;
    },
    ...
}
</code></pre>

<h2 id="automatic-wds-refresh"><a name="user-content-automatic-wds-refresh" href="#automatic-wds-refresh" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Automatic WDS Refresh.</h2>
<p>Install webpack server.</p>
<pre><code class="sh">$ npm i webpack-dev-server@2.2.0-rc.0 --save-dev
</code></pre>

<p>Now we can add webpack-dev-server to our start process.</p>
<pre><code class="js">{
    ...
    &quot;scripts&quot;: {
        ...
        &quot;start&quot;: &quot;webpack-dev-server --env development&quot;,
        ...
    },
    ...
}

</code></pre>

<p>If for some reason the port 8080 is already used, podemos verificarlo usando.</p>
<pre><code class="sh">$ netstat -na | grep 8080
</code></pre>

<p>Retrieve the machine ip to access it from the network.</p>
<pre><code class="sh">$ ifconfig | grep inet
</code></pre>

<p>If we want to change the port used to initialize the server, we can use.</p>
<p>For Max or Linux.</p>
<pre><code class="sh">$ export PORT=3000
</code></pre>

<p>For Windows.</p>
<pre><code class="sh">$ set PORT=3000
</code></pre>

<h3 id="alternative-ways-to-use-webpack-dev-server"><a name="user-content-alternative-ways-to-use-webpack-dev-server" href="#alternative-ways-to-use-webpack-dev-server" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Alternative ways to use webpack-dev-server.</h3>
<ul>
<li>Set up an Express server for our own and use WDS as a middleware.</li>
<li>We can use <a href="https://www.npmjs.com/package/dotenv">dotent</a> to define variables through a .env file.</li>
</ul>
<h3 id="making-wds-faster-to-develop-configuration"><a name="user-content-making-wds-faster-to-develop-configuration" href="#making-wds-faster-to-develop-configuration" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Making WDS faster to develop configuration.</h3>
<p>We can use nodemon to track configuration changes and restart WDS automatically.</p>
<pre><code class="sh">$ npm i nodemon --save-dev
</code></pre>

<p>Now we can update the start process.</p>
<pre><code class="js">{
    ...
    &quot;scripts&quot;: {
        ...
        &quot;build&quot;: &quot;webpack --env production&quot;
    },
    ...
}
</code></pre>

<h3 id="configuring-hot-module-replacement-hrm"><a name="user-content-configuring-hot-module-replacement-hrm" href="#configuring-hot-module-replacement-hrm" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Configuring Hot Module Replacement (HRM).</h3>
<p>Inside webpack.parts.js we can store the settings for HMR.</p>
<pre><code class="js">const webpack = require('webpack')

exports.devServer = function(options) {
    return {
        devServer: {
            historyApiFallback: true,
            hot: true,
            hotOnly: true,
            inline: true,
            stats: 'errors-only',
            host: 'localhost',
            port: 8080
        },
        plugins: [
            new webpack.HotModuleReplacementPlugin({
            })
        ]
    }
}
</code></pre>

<p>And we can inject the configuration inside webpack.config.js.</p>
<pre><code class="js">const parts = require('./webpack.parts')
...
module.exports = function(env) {
    return merge(common, {
            performance: {
                hints: false
            },
            plugins: [
                new webpack.NamedModulesPlugin()
            ]
        },
        parts.devServer()
    )
}
</code></pre>

<p>At this point it wont refresh our components changes because we defined the { hotOnly: true } value. In case that we need to change this behaviour we need to overrite this to false.</p>
<h3 id="debug-details"><a name="user-content-debug-details" href="#debug-details" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Debug details.</h3>
<p>We can see more details about the hot reload status by opening.</p>
<pre><code>http://localhost:8080/webpack-dev-server/
</code></pre>

<h3 id="eslint"><a name="user-content-eslint" href="#eslint" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>ESLint.</h3>
<pre><code class="sh">$ npm i eslint --save-dev
</code></pre>

<p>Now we can set the .eslint file.</p>
<pre><code class="js">module.exports = {
    &quot;env&quot;: {
        &quot;browser&quot;: true,
        &quot;commonjs&quot;: true,
        &quot;es6&quot;: true,
        &quot;node&quot;: true
    },
    &quot;extends&quot;: &quot;eslint:recommended&quot;,
    &quot;parserOptions&quot;: {
        &quot;sourceType&quot;: &quot;module&quot;
    },
    &quot;rules&quot;: {
        &quot;indent&quot;: [
            &quot;error&quot;,
            4
        ],
        &quot;linebreak-style&quot;: [
            &quot;error&quot;,
            &quot;unix&quot;
        ],
        &quot;quotes&quot;: [
            &quot;error&quot;,
            &quot;single&quot;
        ],
        &quot;semi&quot;: [
            &quot;error&quot;,
            &quot;always&quot;
        ],
        &quot;no-unused-vars&quot;: [
            &quot;warn&quot;
        ],
        &quot;no-console&quot;: 0
    }
}
</code></pre>

<p>And the .eslintignore.</p>
<pre><code class="js">node_modules/
build/
</code></pre>

<p>Update your scripts and add a new one called &ldquo;test:lint&rdquo;.</p>
<pre><code class="js">{
    ...
    &quot;scripts&quot;: {
        &quot;test:lint&quot;: &quot;eslint . --cache&quot;,
        ...
    },
    ...
}
</code></pre>

<p>Run your lint test using.</p>
<pre><code class="sh">$ npm run test:lint --silent
</code></pre>

<p>You can fix your errors using.</p>
<pre><code class="sh">$ node_modules/.bin/esling . --fix
</code></pre>

<h3 id="connecting-eslint-with-webpack"><a name="user-content-connecting-eslint-with-webpack" href="#connecting-eslint-with-webpack" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Connecting ESLint with Webpack.</h3>
<pre><code class="sh">$ npm i eslint-loader --save-dev
</code></pre>

<p>Eslint will use the global installed ESLint unless you have one included with the project itself.</p>
<p>We can define our rules using the .eslintrc.js file.</p>
<pre><code class="js">module.exports = {
    &quot;env&quot;: {
        &quot;browser&quot;: true,
        &quot;commonjs&quot;: true,
        &quot;es6&quot;: true,
        &quot;node&quot;: true
    },
    &quot;extends&quot;: &quot;eslint:recommended&quot;,
    &quot;parserOptions&quot;: {
        &quot;sourceType&quot;: &quot;module&quot;
    },
    &quot;rules&quot;: {
        &quot;indent&quot;: [
            &quot;error&quot;,
            4
        ],
        &quot;linebreak-style&quot;: [
            &quot;error&quot;,
            &quot;unix&quot;
        ],
        &quot;quotes&quot;: [
            &quot;error&quot;,
            &quot;single&quot;
        ],
        &quot;semi&quot;: [
            &quot;error&quot;,
            &quot;always&quot;
        ],
        &quot;no-unused-vars&quot;: [
            &quot;warn&quot;
        ],
        &quot;no-console&quot;: 0
    }
}
</code></pre>

<p>We can define also the folders to be ignored using .eslintignore.</p>
<pre><code class="js">node_modules/
build/
</code></pre>

<p>To keep our configuration in the webpack.parts.js we create a new function and we export it.</p>
<pre><code class="js">exports.lintJavaScript = function(paths) {
    return {
        module: {
            rules: [{
                test: /\.js$/,
                include: paths,
                use: 'eslint-loader',
                enforce: 'pre'
            }]
        }
    }
}
</code></pre>

<p>Finally inside the webpack.config.js we can merge to the common object with our lint configuration.</p>
<pre><code class="js">const common = merge({
        entry: {
            app: PATHS.app
        },
        output: {
            path: PATHS.build,
            filename: '[name].js'
        },
        plugins: [
            new HtmlWebpackPlugin({
                title: 'Webpack demo',
            })
        ]
    },
    parts.lintJavaScript(PATHS.app)
);
</code></pre>

<h2 id="chapter-2-handling-styles-with-webpack"><a name="user-content-chapter-2-handling-styles-with-webpack" href="#chapter-2-handling-styles-with-webpack" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Chapter 2 : Handling Styles with Webpack.</h2>
<h3 id="loading-styles"><a name="user-content-loading-styles" href="#loading-styles" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Loading Styles.</h3>
<p>To load CSS, well need css-loader and style-loader.<br />
If an @import points to an external resource, css-loader will skipt it.<br />
After css-loader has done its part, style-loader picks up the output and inject the CSS into the resulting bundle.</p>
<pre><code class="sh">$ npm i css-loader style-loader --save-dev
</code></pre>

<p>Create a configuration for the css-loader as a function.</p>
<pre><code class="js">modules.export = function(paths){
    return {
        module: {
            rules:[{
                test: /\.css$/,
                include: paths,
                use: ['style-loader','css-loader']
            }]
        }
    }
}
</code></pre>

<p>And we can merge that configuration with our webpack.config.js.</p>
<pre><code class="js">module.exports = function() {
    const serverConfig = merge(common, {
        ...
        },
        ...
        parts.loadCSS(PATHS.app),
        parts.devServer(),
        { devServer: { hotOnly: false } }
    );
    return serverConfig;
};
</code></pre>

<p>El loader que utilizamos&hellip;</p>
<pre><code class="js">['style-loader', 'css-loader']
</code></pre>

<p>Puede ser leido asi&hellip;</p>
<pre><code class="js">styleLoader(cssLoader(input))
</code></pre>

<p>Now we need to create an app/main.css file.</p>
<pre><code class="css">.redButton {
    background: red;
}
</code></pre>

<p>And we can import it from index.js.</p>
<pre><code class="js">import './main.css';
...
document.body.appendChild(component());
</code></pre>

<p>At this point we can refresh the browser and see the results.</p>
<h4 id="understanding-css-scroping-and-css-modules"><a name="user-content-understanding-css-scroping-and-css-modules" href="#understanding-css-scroping-and-css-modules" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Understanding CSS Scroping and CSS Modules.</h4>
<p>CSS Modules introduce local scope per import so you dont have to worry about namespace collisions.</p>
<p>You can enable it through <code>css-loader?modules</code>.</p>
<p>Now we have to import the styles to the component and apply the style to the element.</p>
<pre><code class="js">import styles from './main.css';

export default function (){
    const element = document.createElement( 'h1' );
    element.className = styles.redButton;
    ....
    return element;
}
</code></pre>

<p>After this change your class definitions will remain local to the files. In case you want global class definitions youll need to wrap them within <code>:global(.redButton){...}</code>.</p>
<h4 id="less"><a name="user-content-less" href="#less" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>LESS.</h4>
<p>We can process less using the less-loader.</p>
<pre><code class="js">{
    test: /\.less$/,
    use: ['style-loader','css-loader','less-loader']
}
</code></pre>

<h4 id="sass"><a name="user-content-sass" href="#sass" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>SASS.</h4>
<p>It is possible to use the sass-loader for SASS processer.</p>
<pre><code class="js">{
    test: /\.scss$/,
    use: ['style-loader','css-loader','sass-loader']
}
</code></pre>

<p>And if more performance is needed we can also use fast-sass-loader.</p>
<h4 id="stylus"><a name="user-content-stylus" href="#stylus" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Stylus.</h4>
<p>We can process stylus using stylus-loader and yeticss.</p>
<pre><code class="js">{
    test: /\.styl$/,
    use: ['style-loader', 'css-loader', 'stylus-loader']
}

...

plugins: [
    new webpack.LoaderOptionsPlugin({
        options: {
            stylus: {
                use: [require('yeticss')]
            }
        }
    })
]
</code></pre>

<h4 id="postcss"><a name="user-content-postcss" href="#postcss" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>PostCSS.</h4>
<p>We can use post css using postcss-loader.</p>
<pre><code class="js">rules: [
    {
        test: /\.css$/,
        use: ['style-loader','css-loader','postcss-loader']
    }
]
</code></pre>

<p>And we have to add also a postcss.config.js file.</p>
<pre><code class="js">module.exports = {
  plugins: {
    autoprefixer: {},
    precss: {}
  }
};
</code></pre>

<h4 id="understanding-lookups"><a name="user-content-understanding-lookups" href="#understanding-lookups" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Understanding Lookups.</h4>
<p>If you import less/sass files from another, use the exact same pattern.</p>
<pre><code class="js">@import &quot;./variables.less&quot;;
</code></pre>

<p>You can add less/sass files directly from your node_modules directory.</p>
<pre><code class="js">@import &quot;~bootstrap/less/bootstrap&quot;;
</code></pre>

<h4 id="enabling-sourcemaps"><a name="user-content-enabling-sourcemaps" href="#enabling-sourcemaps" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Enabling sourcemaps.</h4>
<p>If you want to enable source maps, you ust enable <code>sourceMap</code> option for css-loader and set <code>output.publicPath</code> to an absolute url.</p>
<h4 id="bootstrap"><a name="user-content-bootstrap" href="#bootstrap" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Bootstrap.</h4>
<p>It can be installed using <code>bootstrap-loader</code> which let you customize it.</p>
<h3 id="separating-css"><a name="user-content-separating-css" href="#separating-css" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Separating CSS.</h3>
<p>Webpack provides a means to generate a separate CSS bundles using <code>ExtractTextPlugin</code>.</p>
<pre><code class="sh">$ npm i extract-text-webpack-plugin@2.0.0-beta.4 --save-dev
</code></pre>

<p>Now we can create the configuration for the css processor inside the webpack.parts.js.</p>
<pre><code class="js">....
const ExtractTextPlugin = require('extract-text-webpack-plugin');

exports.extractCSS = function(paths) {
    return {
        module: {
            rules: [{
                test: /\.css$/,
                include: paths,
                loader: ExtractTextPlugin.extract({
                    fallbackLoader: 'style-loader',
                    loader: 'css-loader'
                })
            }]
        },
        plugins: [
            new ExtractTextPlugin('[name].css')
        ]
    }
}
</code></pre>

<p>And we create a different configuration for the production environment inside webpack.config.js.</p>
<pre><code class="js">module.exports = function(env) {
    if (env == 'production') {
        return merge(common, parts.extractCSS());
    }
    ....
    return serverConfig;
};
</code></pre>

<h4 id="managing-styles-outside-js"><a name="user-content-managing-styles-outside-js" href="#managing-styles-outside-js" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Managing styles outside JS.</h4>
<p>We can package our styles using <a href="https://www.npmjs.com/package/glob">globbinb</a>.</p>
<pre><code class="js">...
const glob = require('glob');

const PATHS = {
  app: path.join(__dirname, 'app'),
  build: path.join(__dirname, 'build'),
  style: glob.sync('./app/**/*.css')
};

const common = merge(
  {
    entry: {
      app: PATHS.app,
      style: ['purecss'].concat(PATHS.style)
    },
    ...
  },
  ...
);
</code></pre>

<h3 id="eliminating-unused-css"><a name="user-content-eliminating-unused-css" href="#eliminating-unused-css" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Eliminating Unused CSS.</h3>
<h4 id="enabling-purifycss"><a name="user-content-enabling-purifycss" href="#enabling-purifycss" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Enabling PurifyCSS.</h4>
<p>Webpack can use <a href="https://www.npmjs.com/package/purifycss-webpack-plugin">purifycss-webpack-plugin</a>.</p>
<pre><code class="sh">$ npm i purifycss-webpack-plugin --save-dev
</code></pre>

<p>Prepare the configuration inside webpack.parts.js.</p>
<pre><code class="js">...
const PurifyCSSPlugin = require('purifycss-webpack-plugin');

exports.purifyCSS = function(paths){
    paths = Array.isArray(paths) ? paths : [paths];
    return {
        new PurifyCSSPlugin({
            basePath: '/',
            paths: paths.map((path) =&gt; {
                console.log('path : ',path);
                return `${path}/*`;
            }),
            resolveExtensions: ['.html'],
            purifyOptions: {
                minify: true,
                info: true,
            }

        })
    };
}
...
</code></pre>

<p>Prepare a block inside the webpack.config.js so we just compile css for production environment.</p>
<pre><code class="js">module.exports = function(env) {

    if (env == 'production') {
        return merge(
            common,
            parts.extractCSS(),
            parts.purifyCSS(PATHS.app)
        );
    }

    ...
}
</code></pre>

<h3 id="linting-css"><a name="user-content-linting-css" href="#linting-css" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Linting CSS.</h3>
<p>To get started, install the required dependencies:</p>
<pre><code class="sh">$ npm install --save-dev stylelint-webpack-plugin
</code></pre>

<p>Update the <code>webpack.parts.js</code> to create the configuration block.</p>
<pre><code class="js">exports.lintCSS = function(paths) {
    return {
        plugins: [
            new StyleLintPlugin({
                configFile: '.stylelintrc',
                // context: paths.app,
                files: './app/*.css',
                failOnError: false,
                quiet: false,
                // syntax: 'scss'
            }),
        ],
    };
};
</code></pre>

<p>Merge it in webpack.config.js.</p>
<pre><code class="js">const common = merge({
    ...
    },

    parts.lintCSS(PATHS.app),
    parts.lintJavaScript(PATHS.app)

);
</code></pre>

<p>Create the .stylelintrc config file with the rules.</p>
<pre><code class="js">{
  &quot;rules&quot;: {
    &quot;block-no-empty&quot;: null,
    &quot;color-no-invalid-hex&quot;: true,
    &quot;comment-empty-line-before&quot;: [ &quot;always&quot;, {
      &quot;ignore&quot;: [&quot;stylelint-commands&quot;, &quot;between-comments&quot;]
    } ],
    &quot;declaration-colon-space-after&quot;: &quot;always&quot;,
    &quot;indentation&quot;: [&quot;tab&quot;, {
      &quot;except&quot;: [&quot;value&quot;]
    }],
    &quot;max-empty-lines&quot;: 2,
    &quot;rule-nested-empty-line-before&quot;: [ &quot;always&quot;, {
      &quot;except&quot;: [&quot;first-nested&quot;],
      &quot;ignore&quot;: [&quot;after-comment&quot;]
    } ],
    &quot;unit-whitelist&quot;: [&quot;em&quot;, &quot;rem&quot;, &quot;%&quot;, &quot;s&quot;]
  }
}
</code></pre>

<p>Now we are going to get lint warnings.</p>
<h2 id="understanding-loaders"><a name="user-content-understanding-loaders" href="#understanding-loaders" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Understanding Loaders.</h2>
<h3 id="anatomy-of-a-loader"><a name="user-content-anatomy-of-a-loader" href="#anatomy-of-a-loader" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Anatomy of a loader.</h3>
<p>Webpack supports a large variety of loaders and a couple of JS formats. The idea is the same, you set up a loader and connect those with your directory structure.</p>
<pre><code class="js">module.exports = {
    module:{
        rules:[{
            test: /\.js$/,
            include: path.join(__dirname,'app'),
            exclude(path){
                return path.match(/node_modules/)
            },
            use: 'babel-loader'
        }]
    }
}
</code></pre>

<h3 id="loader-evaluation-order"><a name="user-content-loader-evaluation-order" href="#loader-evaluation-order" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Loader evaluation order.</h3>
<p>Loaders are always evaluated from right to left and from bottom to top.</p>
<p>This example.</p>
<pre><code class="js">{
    test: /\.css$/,
    use: ['style-loader','css-loader']
}
</code></pre>

<p>Is equivalent to.</p>
<pre><code class="js">{
    test: /\.css$/
    use: ['style-loader']
},
{
    test: /\.css$/,
    use: ['css-loader']
}
</code></pre>

<h3 id="passing-parameters-to-a-loader"><a name="user-content-passing-parameters-to-a-loader" href="#passing-parameters-to-a-loader" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Passing parameters to a loader.</h3>
<p>The query format.</p>
<pre><code class="js">{
    test: /\.css$/,
    use: 'babel-loader?cacheDirectory,presets[]=react,presets[]=es2015',
}
</code></pre>

<p>It is preferable to use a combination of <code>loader</code> and <code>options</code> fields.</p>
<pre><code class="js">{
    // conditions
    test: /\.js$/,
    include: PATHS.app,

    // actions
    use: {
        loader: 'babel-loader',
        options: {
            cacheDirectory: true,
            presets: ['react','es2015']
        }
    }
}
</code></pre>

<p>If we want to use more than one loader.</p>
<pre><code class="js">{
    // conditions
    test: /\.js$/,
    include: PATHS.app,

    // actions
    use: [
        {
            loader: 'babel-loader',
            options: {
                cacheDirectory: true,
                presets: ['react','es2015'],
            },
        },
        // aditional loaders
    ],
},
</code></pre>

<h3 id="inline-definitions"><a name="user-content-inline-definitions" href="#inline-definitions" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Inline definitions.</h3>
<p>Process <code>foo</code> through <code>url-loader</code> and other possible matches.</p>
<pre><code class="js">import 'url-loader!./foo.png';
</code></pre>

<p>Override possible higher level match completely.</p>
<pre><code class="js">import '!!url-loader!./bar.png'
</code></pre>

<p>So we can simplify this way.</p>
<pre><code class="js">{
    entry: {
        app: 'babel-loader!./app',
    },
},
</code></pre>

<h3 id="url-loader-and-file-loader"><a name="user-content-url-loader-and-file-loader" href="#url-loader-and-file-loader" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>url-loader and file-loader</h3>
<p>Install the packages</p>
<pre><code class="sh">$ npm i --save-dev file-loader url-loader
</code></pre>

<p>The <code>url-loader</code> package comes with the <code>limit</code> option that can be used to defer image generation to file-loader after certain limit is reached.</p>
<p>Wepack will resolve any <code>url()</code> statements your styling might have.</p>
<pre><code class="js">{
    test: /\.(jpg|png)$/,
    loader: 'url-loader',
    options: {
        limit: 25000,
    },
},
</code></pre>

<p>If you don&rsquo;t want to inline all together you can use &lsquo;file-loader&rsquo;. The following setup customizes the resulting filename.</p>
<pre><code class="js">{
    test: /\.(jpg|png)$/,
    loader: 'file-loader',
    options: {
        name: '[path][name].[hash].[ext]'
    }
}
</code></pre>

<p>If you want to output your images below an specific directory, set it up like this <code>name:./directory_name/[hash].ext</code>.</p>
<h3 id="svgs"><a name="user-content-svgs" href="#svgs" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>svgs</h3>
<p>Webpack has few ways to load svgs, the simplest way is through file-loader as follows:</p>
<pre><code class="js">{
    test: /\.svg$/,
    use: 'file-laoder',
}
</code></pre>

<p>You can refer to your SVG&rsquo;s this way.</p>
<pre><code class="css">.icon {
    background: url('../assets/icon.svg');
}
</code></pre>

<h3 id="compressing-images"><a name="user-content-compressing-images" href="#compressing-images" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Compressing images</h3>
<p>In case you want to compress your images, use <code>image-webpack-loader</code> or <code>svo-loader</code> (for svg).</p>
<h3 id="utilizing-srcset"><a name="user-content-utilizing-srcset" href="#utilizing-srcset" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Utilizing srcset</h3>
<p>The <code>responsive-image-loader</code> packages allow to generate <code>srcset</code> compatible collections of images.</p>
<h3 id="referencing-to-images"><a name="user-content-referencing-to-images" href="#referencing-to-images" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Referencing to images.</h3>
<p>Webpack can pick up images from stylesheets through <code>@import</code> and <code>url()</code> assuming <code>css-loader</code> has been configured. You can also refer images within the code.</p>
<pre><code class="js">const src = require('./avatar.png');

const Profile = () =&gt; {
    &lt;img src={src} /&gt;
}
</code></pre>

<p>If you use react, then you use <code>babel-plugin-transform-react-jsx-img-import</code> to generate the <code>require</code> automatically.</p>
<pre><code class="js">let profile = &lt;div&gt;
    &lt;img src=&quot;!avatar.png&quot; className=&quot;profile&quot; /&gt;
&lt;/div&gt;
</code></pre>

<p>It is also possible to set up dynamic imports.</p>
<pre><code class="js">const src = require(`./images/${id}`);
</code></pre>

<h3 id="image-properties"><a name="user-content-image-properties" href="#image-properties" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Image properties</h3>
<p>If you need to retrieve the image properties such as its dimensions, you can do that by using <code>image-size-loader</code>.</p>
<h3 id="sprites"><a name="user-content-sprites" href="#sprites" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Sprites</h3>
<p>In order to use sprites you can use <code>webpack-spritesmith</code>.</p>
<h3 id="loading-fonts"><a name="user-content-loading-fonts" href="#loading-fonts" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Loading Fonts.</h3>
<p>There are typically four font formats to worry about, each for certain browser.</p>
<h4 id="choosing-one-format"><a name="user-content-choosing-one-format" href="#choosing-one-format" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Choosing one format.</h4>
<p>If you exclude Opera Mini, all browsers support <code>.woff</code> format. If we go with this format, we can have a file-loader and url setup.</p>
<pre><code class="js">{
    test: /\.woff$/,
    loader: 'url-loader',
    options: {
        limit: 5000,
    },
},
</code></pre>

<p>A more elaborated way to achieve a similar result.</p>
<pre><code class="js">{
    // Match woff2 in addition to patterns like .woff?v=1.1.1.
    test: /\.woff2?(\?v=\d+\.\d+\.\d+)?$/,
    loader: 'url-loader',
    options: {
        limit: 50000,
        mimetype: 'application/font-woff',
        name: './fonts/[hash].[ext]',
    },
},
</code></pre>

<h4 id="supporting-multiple-formats"><a name="user-content-supporting-multiple-formats" href="#supporting-multiple-formats" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Supporting multiple formats.</h4>
<p>If we want to make sure our site looks good on a maximum amount of browsers, we might as well use just <code>file-loader</code> and forget about inlining.</p>
<pre><code class="js">{
    test: /\.woff2?$/,
    loader: 'url-loader',
    options: {
        name: 'fonts/[hash].[ext]',
        limit: 50000,
        mimetype: 'application/font-woff',
    },
},
{
    test: /\.(ttf,svg,eot)$/,
    loader: 'file-loader',
    options: {
        name: 'fonts/[hash].[ext]',
    },
},
</code></pre>

<p>Assuming we are goint to inline the WOFF format, we should have it like this.</p>
<pre><code class="css">@font-face {
    font-family: 'myfontfamily';
    src: url('myfontfile.woff') format('woff2'),
        url('myfontfile.ttf') format('truetype');
}
</code></pre>

<p>This way the browsers will try to consume first the inlined font before loading remote alternatives.</p>
<h4 id="manipulating-file-loader-output-path-and-publicpath"><a name="user-content-manipulating-file-loader-output-path-and-publicpath" href="#manipulating-file-loader-output-path-and-publicpath" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Manipulating <code>file-loader</code> output path and <code>publicPath</code>.</h4>
<pre><code class="js">{
     test: /\.woff2?(\?v=\d+\.\d+\.\d+)?$/,
     loader: 'url-loader',
     options: {
        limit: 5000,
        mimetype: 'application/font-woff',
        name: './fonts/[hash].[ext]',
        publicPath: '../',
     },
},
</code></pre>

<h4 id="using-font-awesome"><a name="user-content-using-font-awesome" href="#using-font-awesome" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Using font awesome</h4>
<p>The ideas above can be wrapped into a configuration part that allows you to work with <code>Font Awesome</code>.</p>
<p>Install font awesome.</p>
<pre><code class="sh">$ npm i --save-dev font-awesome
</code></pre>

<p>Define the <code>loadFonts</code> function in <code>webpacks.parts.js</code>.</p>
<pre><code class="js">exports.loadFonts = function(options){
    const name = (options &amp;&amp; options.name) || 'fonts/[hash].[ext]';
    return {
        module: {
            rules: [
                {
                    test: /\.(woff2?|ttf|svg|eot)(\?v=\d+\.\d+\.\d+)?$/,
                    loader: 'file-loader',
                    options: {
                        name: name,
                    },
                },
            ],
        },
    };
};
</code></pre>

<p>Implement it in <code>webpack.config.js</code>.</p>
<pre><code class="js">const common = merge(baseConfig,
    parts.imageLoader(PATHS.app),
    parts.loadFonts(PATHS.app),
    ...
);
</code></pre>

<p>Then we can import in <code>app/index.js</code>.</p>
<pre><code class="js">...
import component from './component';
import '../node_modules/font-awesome/css/font-awesome.css';
</code></pre>

<p>And then update the component to reflect the styles.</p>
<pre><code class="js">export default function (){
    const element = document.createElement( 'h1' );
    element.className = 'fa fa-spock-o fa-lg';
    element.innerHTML= 'Hello World';
    return element;
}
</code></pre>

<h2 id="building-with-webpack"><a name="user-content-building-with-webpack" href="#building-with-webpack" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Building with Webpack.</h2>
<h3 id="enabling-sourcemaps_1"><a name="user-content-enabling-sourcemaps_1" href="#enabling-sourcemaps_1" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Enabling Sourcemaps.</h3>
<p>To improve the debuggability of the application, we can set up sourcemaps for both code and styling. These allow to see exactly where the error was raised.</p>
<p>Webpack can generate inline and separate sourcemaps files.</p>
<p>Wepack provides two ways to generate sourcemaps, the shorcut field know as <code>devtool</code> and a plugin that gives more options to tweak.</p>
<pre><code class="js">exports.generateSourcemaps = function(type){
    return {
        devtool: type,
    };
};
</code></pre>

<p>In order to map the styles we need to set that configuration for the css-loader.</p>
<pre><code class="js">exports.loadCSS = function(paths) {
    return {
        module: {
            rules: [{
                test: /\.css$/,
                use: [{
                    loader: 'style-loader'
                }, {
                    loader: 'css-loader',
                    options: {
                        sourceMap: true
                    }
                }]
            }]
        }
    }
}
</code></pre>

<p>Webpack supports a wide variety of sourcemaps. For now we can enable <code>eval-source-map</code> for development and <code>source-map</code> for production.</p>
<p>Then we can merge the values in our webpack.config.js for development and production.</p>
<pre><code class="js">case 'production':

    serverConfig = merge(
        common,
        parts.generateSourcemaps('source-map'),
        ...
    );

    ...

default:

serverConfig = merge(

    ...

    parts.loadCSS(PATHS.app),
    parts.generateSourcemaps('eval-source-map'),
    ...
);
</code></pre>

<h4 id="sourcemap-types-supported-by-webpack"><a name="user-content-sourcemap-types-supported-by-webpack" href="#sourcemap-types-supported-by-webpack" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Sourcemap types supported by webpack.</h4>
<p>The lower quality, the higher build and rebuild speeds are possible.</p>
<ul>
<li>eval (generated code)</li>
<li>cheap-eval-source-map (transformed code)</li>
<li>cheap-module-eval-source-map (original code)</li>
<li>eval-source-map (original source)</li>
</ul>
<p>Production usage friendly sourcemaps.</p>
<ul>
<li>cheap-source-map (transformed code, lines only)</li>
<li>cheap-module-source-map (original source, lines only)</li>
<li>source-map (original source)</li>
<li>hidden-source-map (original withouth reference)</li>
</ul>
<h4 id="sourcemapdevtoolplugin"><a name="user-content-sourcemapdevtoolplugin" href="#sourcemapdevtoolplugin" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>SourceMapDevToolPlugin</h4>
<p>For more control over the sourcemap generation, it is possible to use the <code>SourceMapDevToolPlugin</code>.</p>
<h4 id="dependency-sourcemaps"><a name="user-content-dependency-sourcemaps" href="#dependency-sourcemaps" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Dependency sourcemaps.</h4>
<p>You can use <code>source-map-loader</code> to make webpack aware of the sourcemap dependencies.</p>
<h3 id="splitting-bundles"><a name="user-content-splitting-bundles" href="#splitting-bundles" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Splitting Bundles.</h3>
<h4 id="the-idea-of-bundle-splitting"><a name="user-content-the-idea-of-bundle-splitting" href="#the-idea-of-bundle-splitting" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>The idea of bundle splitting.</h4>
<p>Using bundle splitting, we can push vendor dependencies to a bundle of their own and benefit from client level caching. There are more requests to perform, but the benefit of caching makes up for this cost.</p>
<p>Lets for example add react to our project.</p>
<pre><code class="sh">$ npm i --save-dev react
</code></pre>

<p>Now we can import it inside <code>app/index.js</code>.</p>
<pre><code class="js">import 'purecss/build/pure.css';
import 'purecss/build/pure.css';
import './main.css';
...
</code></pre>

<p>If we build the project we are going to see that the generated <code>app.js</code> file is much bigger compared to the past.</p>
<h4 id="setting-up-a-vendor-bundle"><a name="user-content-setting-up-a-vendor-bundle" href="#setting-up-a-vendor-bundle" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Setting up a vendor bundle.</h4>
<p>We can call react as an external vendor, this will be compiled insde the vendor.js file.</p>
<pre><code class="js"> module.exports = function(env) {
    ....
    switch (env) {
        case 'production':
            serverConfig = merge(
                common,
                { entry: { vendor: ['react'] } },
                ...
            );
            break;
    }
    return serverConfig;
};
</code></pre>

<h4 id="commonschunkplugin"><a name="user-content-commonschunkplugin" href="#commonschunkplugin" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>CommonsChunkPlugin</h4>
<p><code>CommonChunkPlugin</code> is a powerful and complex plugin.</p>
<p>Create a new function insde the</p>
<pre><code class="js">module.exports = function(env) {
    ...
    serverConfig = merge(
        common,
        parts.extractBundles([
            {
                name: 'vendor',
                entries: ['react'],
            }
        ]),
        ...
    )
}
</code></pre>

<p>If you run <code>npm run build</code> you should see that dependencies are loaded inside the vendor build.</p>
<h4 id="loading-dependencies-to-a-vendor-bundle-automatically"><a name="user-content-loading-dependencies-to-a-vendor-bundle-automatically" href="#loading-dependencies-to-a-vendor-bundle-automatically" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Loading dependencies to a vendor bundle automatically.</h4>
<p>If you application grows and you have more entry points, the <code>minChunks</code> can be combined with more granular control by specifying chunks.</p>
<pre><code class="js">{
    ...
    plugins: [
       new webpack.optimize.CommonsChunkPlugin({
            name: 'login',
            chunks: ['login'],
            minChunks: isVendor,
        }),
        new webpack.optimize.CommonsChunkPlugin({
            name: 'vendor',
            chunks: ['app'],
            minChunks: isVendor,
        }),
        // Extract chunks common to both app and login
        new webpack.optimize.CommonsChunkPlugin({
            name: 'common',
            chunks: ['login', 'app'],
            minChunks: (module, count) =&gt; {
                return count &gt;= 2 &amp;&amp; isVendor(module);
            }
        }),
    ],
    ...
};
</code></pre>

<h4 id="chunk-types-in-webpack"><a name="user-content-chunk-types-in-webpack" href="#chunk-types-in-webpack" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Chunk types in webpack.</h4>
<p>Internally webpack treats entry chunks in three types.</p>
<ul>
<li>Entry chunks (Contain webpack runtime and modules it then loads).</li>
<li>Normal chunks (It can be loaded dynamically while the app is running).</li>
<li>Initial chunks (Generated by CommonsChunkPlugin).</li>
</ul>
<h3 id="code-splitting"><a name="user-content-code-splitting" href="#code-splitting" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Code Splitting.</h3>
<p>It is possible to load small portions of data using lazy load.</p>
<h4 id="code-splitting-formats"><a name="user-content-code-splitting-formats" href="#code-splitting-formats" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Code splitting formats.</h4>
<p>Code splitting can be done in two primary ways in webpack: through a <code>dyamic import</code> or <code>require.ensure</code>.</p>
<h5 id="dynamic-import"><a name="user-content-dynamic-import" href="#dynamic-import" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Dynamic import.</h5>
<p>Dynamic import looks this way.</p>
<pre><code class="js">import('./module')
    .then((module) =&gt; {
        ...
    })
    .catch((error) =&gt; {
        ...
    })
</code></pre>

<p>We can do this process in parallel using <code>Promises</code>.</p>
<pre><code class="js">Promise.all([
        import('lunr'),
        import('../search_index.json'),
    ])
    .then(([lunr, search]) =&gt; {
        return {
            index: lunr.Index.load(search.index),
            lines: search.lines,
        }
    })
</code></pre>

<p>This will create separate chunks to request, if you wanted only once you would have to define an intermediate module.</p>
<h5 id="requireensure"><a name="user-content-requireensure" href="#requireensure" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>require.ensure</h5>
<p>This is an alternative way.</p>
<pre><code class="js">require.ensure(
    // modules to load but not execute yet
    ['./load-earlier'],
    () =&gt; {
        const loadEarlier = require('./load-earlier');

        // load on demand
        const module1 = require('./module1');
        const module2 = require('./module2');
    }
)
</code></pre>

<h4 id="requireinclude"><a name="user-content-requireinclude" href="#requireinclude" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>require.include</h4>
<p>The example can be rewritten using a webpack specific funcion.</p>
<pre><code class="js">require.ensure(
    [],
    () =&gt; {
        require.include('./load-earlier');
        const module1 = require('./module1');
        const module2 = require('./module2');
    }
)
</code></pre>

<p>You can customize the chunk outputs using&hellip; <code>chunkFilename: path/[name].js</code>.</p>
<h4 id="setting-up-code-splitting"><a name="user-content-setting-up-code-splitting" href="#setting-up-code-splitting" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Setting up code splitting.</h4>
<p>Lets implement the code splitting using dynamic import.</p>
<h5 id="tweaking-eslint"><a name="user-content-tweaking-eslint" href="#tweaking-eslint" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Tweaking ESLint</h5>
<p>Install babel-eslint.</p>
<pre><code class="js">npm i babel-eslint -D
</code></pre>

<h5 id="eslintrcjs"><a name="user-content-eslintrcjs" href="#eslintrcjs" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>.eslintrc.js</h5>
<p>First we need to customize the <code>.eslintrc.js</code> so we can process using the eslint parser.</p>
<pre><code class="js">module.exports = {
    ...
    &quot;parser&quot;: &quot;babel-eslint&quot;,
    &quot;parserOptions&quot;: {
        ...
        &quot;allowImportExportEverywhere&quot;: true,
    },
    ...
}
</code></pre>

<p>Create the component you are going to import to replace element text.</p>
<pre><code class="js">export default 'Hello from lazy';
</code></pre>

<p>Now use dynamic inside <code>app/components.js</code>.</p>
<pre><code class="js">export default function (){
    ....
    element.onclick = () =&gt; {
        import('./lazy').then((lazy) =&gt; {
            element.textContent = lazy.default;
        }).catch((err) =&gt; {
            console.error(err);
        });
    };
    return element;
}
</code></pre>

<p>Now when you run <code>build</code> it will generate a new chunk called <code>0.js</code>.</p>
<h4 id="split-point-using-requireensure"><a name="user-content-split-point-using-requireensure" href="#split-point-using-requireensure" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Split point using <code>require.ensure</code></h4>
<pre><code class="js">export default function(){
    const element = document.createElement('')
}
</code></pre></article></body></html>